<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>–ß–µ–∫-–ª–∏—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞ ‚Äî –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥ (A‚ÄìD)</title>
<meta name="color-scheme" content="light" />
<style>
  :root{
    --bg:#ffffff; --fg:#0f172a; --muted:#64748b;
    --card:#ffffff; --border:#e2e8f0; --shadow:0 10px 28px rgba(0,0,0,.08);
    --accent:#e11d48; --accent2:#2563eb; --ok:#16a34a; --warn:#d97706; --bad:#dc2626;
    --radius:16px; --sans:ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;
    --mono:ui-monospace,Menlo,Consolas,monospace;
  }
  html,body{height:100%}
  body{
    margin:0;
    background:#ffffff !important; /* —Ñ–∏–∫—Å–∏—Ä—É–µ–º –±–µ–ª—ã–π —Ñ–æ–Ω */
    color:#0f172a !important;
    font:16px/1.6 var(--sans); -webkit-font-smoothing:antialiased
  }
  a{color:var(--accent2);text-decoration:none} a:hover{text-decoration:underline}
  h1,h2,h3{line-height:1.25;margin:1.1em 0 .5em}
  h1{font-size:clamp(26px,3.4vw,38px)}
  h2{font-size:clamp(20px,2.6vw,26px)} h3{font-size:clamp(18px,2.2vw,22px)}
  .wrap{max-width:1200px;margin:0 auto;padding:22px}
  .grid{display:grid;grid-template-columns:1fr;gap:16px}
  .card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow);padding:18px}
  .lead{color:var(--muted)}
  .toolbar{display:flex;gap:10px;flex-wrap:wrap}
  .btn{appearance:none;border:1px solid var(--border);background:var(--card);color:var(--fg);padding:8px 12px;border-radius:10px;cursor:pointer}
  .btn:hover{transform:translateY(-1px)}
  .btn-accent{background:var(--accent);color:#fff;border-color:transparent}
  .btn-ghost{background:transparent}
  .muted{color:var(--muted)}
  .tag{display:inline-block;font-size:12px;padding:2px 8px;border-radius:999px;border:1px solid var(--border);color:var(--muted)}
  .kpi{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
  .kpi .badge{display:inline-flex;align-items:center;gap:8px;border:1px solid var(--border);border-radius:12px;padding:8px 12px;background:rgba(127,127,127,.06)}
  .score{font:600 24px/1 var(--sans)}
  .grade{font:700 24px/1 var(--sans)}
  .grade.A{color:var(--ok)} .grade.B{color:var(--accent2)} .grade.C{color:var(--warn)} .grade.D{color:var(--bad)}
  .progress{display:flex;align-items:center;gap:10px}
  .bar{height:10px;background:rgba(127,127,127,.25);border-radius:999px;overflow:hidden;flex:1}
  .bar>span{display:block;height:100%;width:0%;background:linear-gradient(90deg,var(--accent),var(--accent2))}
  .pill{display:inline-block;padding:4px 8px;border-radius:999px;border:1px solid var(--border);font-size:12px}

  /* –¢–∞–±–ª–∏—Ü–∞ */
  .table-wrap{overflow:auto}
  table{width:100%;border-collapse:separate;border-spacing:0}
  th,td{border:1px solid var(--border);padding:10px;vertical-align:top}
  th{position:sticky;top:0;background:var(--card);z-index:1}
  tr:nth-child(even) td{background:rgba(127,127,127,.04)}
  textarea,input[type="text"]{
    width:100%;box-sizing:border-box;background:transparent;color:var(--fg);
    border:1px solid var(--border);border-radius:8px;padding:8px;font:14px/1.4 var(--sans)
  }
  .center{text-align:center}

  /* –°–µ–≥–º–µ–Ω—Ç—ã –æ—Ü–µ–Ω–∫–∏ */
  .seg{display:inline-grid;grid-auto-flow:column;gap:6px}
  .seg input{display:none}
  .seg label{
    user-select:none;cursor:pointer;border:1px solid var(--border);padding:6px 8px;border-radius:999px;background:rgba(127,127,127,.06);font-size:12px
  }
  .seg input:checked + label{border-color:transparent;background:linear-gradient(90deg,var(--accent2),var(--accent));color:#fff}
  .seg label[data-val="ok"]{background:rgba(22,163,74,.12)}
  .seg label[data-val="risk"]{background:rgba(217,119,6,.12)}
  .seg label[data-val="bad"]{background:rgba(220,38,38,.12)}
  .seg input:checked + label[data-val="ok"]{background:var(--ok)}
  .seg input:checked + label[data-val="risk"]{background:var(--warn)}
  .seg input:checked + label[data-val="bad"]{background:var(--bad)}

  /* –ü–µ—á–∞—Ç—å */
  @media print{
    .toolbar,.import-export{display:none!important}
    .card{box-shadow:none;border-color:#ddd;break-inside:avoid}
    a{text-decoration:underline;color:#000}
  }
</style>
</head>
<body>
<div class="wrap grid">

  <header class="card">
    <h1>–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —á–µ–∫-–ª–∏—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞</h1>
    <p class="lead">–ü—Ä–æ—Ö–æ–¥–∏–º –ø–æ –ø—É–Ω–∫—Ç–∞–º, –æ—Ç–º–µ—á–∞–µ–º ¬´–ì–æ—Ç–æ–≤–æ¬ª, –≤—ã—Å—Ç–∞–≤–ª—è–µ–º –æ—Ü–µ–Ω–∫—É (OK / –†–∏—Å–∫ / –ü–ª–æ—Ö–æ / –ù/–ü), –ø–æ–ª—É—á–∞–µ–º –±–∞–ª–ª 0‚Äì100 –∏ —Ä–µ–π—Ç–∏–Ω–≥ A‚ÄìD —Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏. –í—Å–µ —Å—Å—ã–ª–∫–∏ ‚Äî –Ω–∞ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏.</p>

    <!-- üîπ –†–µ–∫–≤–∏–∑–∏—Ç—ã –∫–æ–º–ø–∞–Ω–∏–∏ -->
    <div class="toolbar" style="flex-direction:column;align-items:flex-start;gap:8px;margin:10px 0 6px">
      <label>–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏:
        <input id="compName" type="text" placeholder="–û–û–û ¬´–ü—Ä–∏–º–µ—Ä¬ª" style="width:320px" />
      </label>
      <label>–ò–ù–ù:
        <input id="compINN" type="text" placeholder="7700000000" style="width:220px" />
      </label>
      <label>–û–ì–†–ù:
        <input id="compOGRN" type="text" placeholder="1027700000000" style="width:260px" />
      </label>
    </div>

    <div class="toolbar" role="group" aria-label="–£—Ç–∏–ª–∏—Ç—ã">
      <button class="btn" id="expand">–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –¥–µ—Ç–∞–ª–∏</button>
      <button class="btn" id="collapse">–°–≤–µ—Ä–Ω—É—Ç—å –¥–µ—Ç–∞–ª–∏</button>
      <button class="btn btn-accent" id="print">–ü–µ—á–∞—Ç—å / PDF</button>
    </div>
  </header>

  <section class="card">
    <h2>–ò—Ç–æ–≥ –ø–æ –ø—Ä–æ–≤–µ—Ä–∫–µ</h2>
    <div class="kpi">
      <div class="badge"><span class="muted">–°—É–º–º–∞—Ä–Ω—ã–π –±–∞–ª–ª:</span> <span id="score" class="score">0</span>/100</div>
      <div class="badge"><span class="muted">–†–µ–π—Ç–∏–Ω–≥:</span> <span id="grade" class="grade D">D</span></div>
      <div class="badge"><span class="muted">–ó–∞–ø–æ–ª–Ω–µ–Ω–æ —à–∞–≥–æ–≤:</span>
        <div class="progress" style="min-width:220px">
          <div class="bar"><span id="bar" style="width:0%"></span></div>
          <span><span id="done">0</span>/<span id="total">0</span></span>
        </div>
      </div>
      <span class="tag" id="modelTag">–ú–æ–¥–µ–ª—å: –Ω–µ–π—Ç—Ä–∞–ª—å–Ω–∞—è</span>
    </div>
    <p class="muted">–ë–∞–ª–ª—ã —Å—á–∏—Ç–∞—é—Ç—Å—è –ø–æ –≤–µ—Å–∞–º –ø—É–Ω–∫—Ç–æ–≤ (—Å–º. ¬´–ú–æ–¥–µ–ª—å –∏ —Ñ–æ—Ä–º—É–ª—ã¬ª –≤ –∫–æ–Ω—Ü–µ). ¬´–ù/–ü¬ª ‚Äî –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö / –Ω–µ –ø—Ä–∏–º–µ–Ω–∏–º–æ. –í –Ω–µ–π—Ç—Ä–∞–ª—å–Ω–æ–π –º–æ–¥–µ–ª–∏ ¬´–ù/–ü¬ª –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç; –≤ –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–æ–π ‚Äî –¥–∞—ë—Ç 25% –æ—Ç –≤–µ—Å–∞.</p>
    <div class="toolbar import-export" style="margin-top:8px">
      <button class="btn" id="toggleModel">–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –º–æ–¥–µ–ª—å (–Ω–µ–π—Ç—Ä–∞–ª—å–Ω–∞—è ‚áÑ –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–∞—è)</button>
      <button class="btn" id="export">–≠–∫—Å–ø–æ—Ä—Ç JSON</button>
      <label class="btn btn-ghost" for="importFile">–ò–º–ø–æ—Ä—Ç JSON</label>
      <input id="importFile" type="file" accept="application/json" hidden />
      <button class="btn" id="reset">–°–±—Ä–æ—Å–∏—Ç—å –≤—Å—ë</button>
    </div>
  </section>

  <section class="card" id="links">
    <h2>–ë—ã—Å—Ç—Ä—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∏</h2>
    <div class="toolbar" style="flex-wrap:wrap">
      <a class="btn" href="https://egrul.nalog.ru/" target="_blank" rel="noopener">–ï–ì–†–Æ–õ/–ï–ì–†–ò–ü (–§–ù–°)</a>
      <a class="btn" href="https://pb.nalog.ru/" target="_blank" rel="noopener">–ü—Ä–æ–∑—Ä–∞—á–Ω—ã–π –±–∏–∑–Ω–µ—Å (–§–ù–°)</a>
      <a class="btn" href="https://bo.nalog.ru/" target="_blank" rel="noopener">–ë—É—Ö–≥–∞–ª—Ç–µ—Ä—Å–∫–∞—è –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç—å (–ì–ò–† –ë–û)</a>
      <a class="btn" href="https://cbr.ru/counteraction_m_ter/platform_zsk/proverka-po-inn/" target="_blank" rel="noopener">¬´–ó–Ω–∞–π —Å–≤–æ–µ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞¬ª (–¶–ë, –ó–°–ö)</a>
      <a class="btn" href="https://kad.arbitr.ru/" target="_blank" rel="noopener">–ê—Ä–±–∏—Ç—Ä–∞–∂</a>
      <a class="btn" href="https://fssp.gov.ru/iss/ip" target="_blank" rel="noopener">–§–°–°–ü (–∏—Å–ø. –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞)</a>
      <a class="btn" href="https://bankrot.fedresurs.ru/" target="_blank" rel="noopener">–ï–§–†–°–ë (–±–∞–Ω–∫—Ä–æ—Ç—Å—Ç–≤–æ)</a>
      <a class="btn" href="https://www.reestr-zalogov.ru/" target="_blank" rel="noopener">–†–µ–µ—Å—Ç—Ä –∑–∞–ª–æ–≥–æ–≤</a>
      <a class="btn" href="https://www.rusprofile.ru/" target="_blank" rel="noopener">Rusprofile</a>
    </div>
  </section>

  <!-- –¢–∞–±–ª–∏—Ü–∞ —á–µ–∫-–ª–∏—Å—Ç–∞ —Å—Ç—Ä–æ–∏—Ç—Å—è –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ -->
  <section class="card">
    <h2>–ß–µ–∫-–ª–∏—Å—Ç</h2>
    <p class="muted">–î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—É–Ω–∫—Ç–∞: –æ—Ç–º–µ—Ç—å—Ç–µ ¬´–ì–æ—Ç–æ–≤–æ¬ª, –≤—ã–±–µ—Ä–∏—Ç–µ –æ—Ü–µ–Ω–∫—É, –æ—Å—Ç–∞–≤—å—Ç–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏–µ. –ë–∞–ª–ª—ã –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.</p>
    <div class="table-wrap">
      <table id="tbl">
        <thead>
          <tr>
            <th class="center">#</th>
            <th>–ë–ª–æ–∫ / –ü—É–Ω–∫—Ç</th>
            <th>–†–µ—Å—É—Ä—Å</th>
            <th>–û—Ü–µ–Ω–∫–∞</th>
            <th>–í–µ—Å</th>
            <th>–ì–æ—Ç–æ–≤–æ</th>
            <th>–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ</th>
          </tr>
        </thead>
        <tbody id="tbody"></tbody>
      </table>
    </div>
  </section>

  <section class="card">
    <h2>–°–≤–æ–¥–∫–∞ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</h2>
    <textarea id="summary" rows="10" placeholder="–ö—Ä–∞—Ç–∫–∞—è –∑–∞–ø–∏—Å–∫–∞ –ø–æ—è–≤–∏—Ç—Å—è –ø–æ—Å–ª–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è —á–µ–∫-–ª–∏—Å—Ç–∞‚Ä¶"></textarea>
    <div class="toolbar" style="margin-top:8px">
      <button class="btn" id="buildSummary">–û–±–Ω–æ–≤–∏—Ç—å –∑–∞–ø–∏—Å–∫—É</button>
      <button class="btn btn-accent" id="print2">–ü–µ—á–∞—Ç—å / PDF</button>
    </div>
    <p class="muted">–ü–æ–¥—Å–∫–∞–∑–∫–∞: –ø—Ä–∏ –ø–µ—á–∞—Ç–∏ –±—Ä–∞—É–∑–µ—Ä –ø–æ–∑–≤–æ–ª—è–µ—Ç ¬´–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–∫ PDF¬ª. –°—Ç–∏–ª–∏ —É–∂–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è —á–∏—Å—Ç–æ–π –ø–µ—á–∞—Ç–Ω–æ–π –≤–µ—Ä—Å–∏–∏.</p>
  </section>

  <section class="card" id="model">
    <h2>–ú–æ–¥–µ–ª—å –∏ —Ñ–æ—Ä–º—É–ª—ã (–ø—Ä–æ—Å—Ç–æ)</h2>
    <ul>
      <li><strong>–°—Ç—Ä—É–∫—Ç—É—Ä–∞:</strong> 6 –±–ª–æ–∫–æ–≤ (=–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏), –≤–Ω—É—Ç—Ä–∏ ‚Äî –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø—É–Ω–∫—Ç—ã. –£ –∫–∞–∂–¥–æ–≥–æ –ø—É–Ω–∫—Ç–∞ –µ—Å—Ç—å <em>–≤–µ—Å</em> (—Å–∫–æ–ª—å–∫–æ –æ–Ω —Å—Ç–æ–∏—Ç –≤ –±–∞–ª–ª–∞—Ö).</li>
      <li><strong>–û—Ü–µ–Ω–∫–∞ –ø—É–Ω–∫—Ç–∞:</strong> <span class="pill">OK = 100%</span>, <span class="pill">–†–∏—Å–∫ = 50%</span>, <span class="pill">–ü–ª–æ—Ö–æ = 0%</span>, <span class="pill">–ù/–ü = 0% (–Ω–µ–π—Ç—Ä–∞–ª—å–Ω–∞—è) / 25% (–∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–∞—è)</span>.</li>
      <li><strong>–°—á—ë—Ç:</strong> –∏—Ç–æ–≥ = —Å—É–º–º–∞(–≤–µ—Å √ó –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –æ—Ü–µ–Ω–∫–∏). –ú–∞–∫—Å–∏–º—É–º = 100.</li>
      <li><strong>–†–µ–π—Ç–∏–Ω–≥:</strong> A ‚â• 85 (–Ω–∏–∑–∫–∏–π —Ä–∏—Å–∫); B 70‚Äì84 (—É–º–µ—Ä–µ–Ω–Ω—ã–π); C 50‚Äì69 (–ø–æ–≤—ã—à–µ–Ω–Ω—ã–π); D &lt; 50 (–≤—ã—Å–æ–∫–∏–π).</li>
      <li><strong>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:</strong> A ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —É—Å–ª–æ–≤–∏—è; B ‚Äî —á–∞—Å—Ç—å —Å—É–º–º—ã —á–µ—Ä–µ–∑ –∞–∫–∫—Ä–µ–¥–∏—Ç–∏–≤/–≥–∞—Ä–∞–Ω—Ç–∏—é; C ‚Äî –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞ ‚â§20% + –≥–∞—Ä–∞–Ω—Ç–∏—è; D ‚Äî –æ—Ç–∫–∞–∑ –∏–ª–∏ –∂—ë—Å—Ç–∫–∏–µ —É—Å–ª–æ–≤–∏—è/—ç—Å–∫—Ä–æ—É.</li>
    </ul>
  </section>



</div>

<script>
/* ==== localStorage (–±–µ–∑ –æ—à–∏–±–æ–∫ –≤ –∂—ë—Å—Ç–∫–æ–º sandbox) ==== */
const store = (()=>{try{const t='__t__';localStorage.setItem(t,'1');localStorage.removeItem(t);return localStorage}catch(e){return {getItem:()=>null,setItem:()=>{},removeItem:()=>{}}}})();

/* ==== –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–≤–µ—Å–∞ –≤ —Å—É–º–º–µ ‚âà 100) ==== */
const CONFIG = [
  { title:"1) –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –ø–æ–ª–Ω–æ–º–æ—á–∏—è (–ï–ì–†–Æ–õ)", items:[
    { id:"1.1", text:"–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, —Å—Ç–∞—Ç—É—Å –¥–µ–π—Å—Ç–≤—É—é—â–∞—è", weight:4, link:"https://egrul.nalog.ru/" },
    { id:"1.2", text:"–ê–¥—Ä–µ—Å –Ω–µ –º–∞—Å—Å–æ–≤—ã–π, –Ω–µ—Ç –ø–æ–º–µ—Ç–∫–∏ ¬´—Å–≤–µ–¥–µ–Ω–∏—è –Ω–µ–¥–æ—Å—Ç–æ–≤–µ—Ä–Ω—ã¬ª", weight:3, link:"https://egrul.nalog.ru/" },
    { id:"1.3", text:"–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –∏ –ø—Ä–∞–≤–æ –ø–æ–¥–ø–∏—Å–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω—ã (—É—Å—Ç–∞–≤/–¥–æ–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å)", weight:2, link:"https://egrul.nalog.ru/" },
    { id:"1.4", text:"–û–ö–í–≠–î —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–π –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏", weight:1, link:"https://egrul.nalog.ru/" },
  ]},
  { title:"2) –ù–∞–ª–æ–≥–∏ –∏ –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç—å (–§–ù–°, –ì–ò–† –ë–û)", items:[
    { id:"2.1", text:"–ù–∞–ª–æ–≥–æ–≤–∞—è –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞: –¥–æ–ª–≥–æ–≤ –Ω–µ—Ç / –ø–æ—è—Å–Ω–µ–Ω–∏—è —É–±–µ–¥–∏—Ç–µ–ª—å–Ω—ã", weight:8, link:"https://pb.nalog.ru/" },
    { id:"2.2", text:"–û—Ç—á—ë—Ç–Ω–æ—Å—Ç—å –≤ –ì–ò–† –ë–û: –≤—ã—Ä—É—á–∫–∞/–ø—Ä–∏–±—ã–ª—å –∞–¥–µ–∫–≤–∞—Ç–Ω—ã, –¥–∏–Ω–∞–º–∏–∫–∞ 2‚Äì3 –≥–æ–¥–∞", weight:8, link:"https://bo.nalog.ru/" },
    { id:"2.3", text:"–ï—Å—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –∏ –≠–î–û (–ø–æ –¥–∞–Ω–Ω—ã–º –§–ù–°)", weight:4, link:"https://pb.nalog.ru/" },
  ]},
  { title:"3) –§–∏–Ω–∞–Ω—Å–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (—Å–º—ã—Å–ª)", items:[
    { id:"3.1", text:"–î–µ–Ω–µ–∂–Ω—ã–π –ø–æ—Ç–æ–∫ –æ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –Ω–µ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π —Å–∏—Å—Ç–µ–º–Ω–æ", weight:8, link:"https://bo.nalog.ru/" },
    { id:"3.2", text:"–î–æ–ª–≥–æ–≤–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –æ–±—Å–ª—É–∂–∏–≤–∞–µ–º–∞—è (–ø—Ä–æ—Ü–µ–Ω—Ç—ã –ø–æ–∫—Ä—ã–≤–∞—é—Ç—Å—è)", weight:6, link:"https://bo.nalog.ru/" },
    { id:"3.3", text:"–ó–∞–ø–∞—Å—ã/–¥–µ–±–∏—Ç–æ—Ä–∫–∞ –Ω–µ ¬´–∑–∞–≤–∏—Å–∞—é—Ç¬ª –Ω–∞ –¥–ª–∏–Ω–Ω—ã–π —Å—Ä–æ–∫", weight:6, link:"https://bo.nalog.ru/" },
  ]},
  { title:"4) –°—É–¥–µ–±–Ω—ã–µ —Å–ø–æ—Ä—ã, –ò–ü, –±–∞–Ω–∫—Ä–æ—Ç—Å—Ç–≤–æ", items:[
    { id:"4.1", text:"–°—É–¥–µ–±–Ω—ã–µ –¥–µ–ª–∞: –Ω–µ–º–Ω–æ–≥–æ, —Ç–µ–º–∞—Ç–∏–∫–∞ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–∞—è", weight:8, link:"https://kad.arbitr.ru/" },
    { id:"4.2", text:"–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞: –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç / –Ω–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–µ", weight:6, link:"https://fssp.gov.ru/iss/ip" },
    { id:"4.3", text:"–ù–µ—Ç –ø—Ä–æ—Ü–µ–¥—É—Ä –±–∞–Ω–∫—Ä–æ—Ç—Å—Ç–≤–∞ (–∫–æ–º–ø–∞–Ω–∏—è/–≥—Ä—É–ø–ø–∞)", weight:6, link:"https://bankrot.fedresurs.ru/" },
  ]},
  { title:"5) –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏ –ª–∏—Ü–µ–Ω–∑–∏–∏", items:[
    { id:"5.1", text:"–õ–∏—Ü–µ–Ω–∑–∏–∏/–°–†–û/—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –≤ –ø–æ—Ä—è–¥–∫–µ (–µ—Å–ª–∏ —Ç—Ä–µ–±—É—é—Ç—Å—è)", weight:6, link:"" },
    { id:"5.2", text:"–ü–µ—Ä—Å–æ–Ω–∞–ª, –ø–ª–æ—â–∞–¥–∫–∏, –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –æ–±—ä—ë–º—É", weight:5, link:"" },
    { id:"5.3", text:"–õ–æ–≥–∏—Å—Ç–∏–∫–∞ –∏ –ø—Ä–∏—ë–º–∫–∞: –ø–æ–Ω—è—Ç–Ω—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã", weight:4, link:"" },
  ]},
  { title:"6) –°–∞–Ω–∫—Ü–∏–∏, –±–µ–Ω–µ—Ñ–∏—Ü–∏–∞—Ä—ã, —Ä–µ–ø—É—Ç–∞—Ü–∏—è", items:[
    { id:"6.1", text:"–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ –ó–°–ö –¶–ë: —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π/—Ä–∏—Å–∫–æ–≤ –Ω–µ—Ç", weight:6, link:"https://cbr.ru/counteraction_m_ter/platform_zsk/proverka-po-inn/" },
    { id:"6.2", text:"–ë–µ–Ω–µ—Ñ–∏—Ü–∏–∞—Ä—ã –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤–ª–∞–¥–µ–Ω–∏—è –ø–æ–Ω—è—Ç–Ω—ã", weight:5, link:"https://egrul.nalog.ru/" },
    { id:"6.3", text:"–†–µ–ø—É—Ç–∞—Ü–∏—è: —Å–∞–π—Ç, –æ—Ç–∑—ã–≤—ã, –º–µ–¥–∏–∞ –±–µ–∑ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –Ω–µ–≥–∞—Ç–∏–≤–∞", weight:4, link:"https://www.rusprofile.ru/" },
  ]},
];

/* ==== –ú–æ–¥–µ–ª—å (–Ω–µ–π—Ç—Ä–∞–ª—å–Ω–∞—è/–∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–∞—è) ==== */
const STATE_KEY="ctr_check_v1";
let model = { name:"neutral", npFactor:0.0 }; // neutral: –ù/–ü=0%; conservative: –ù/–ü=25%

/* ==== –®–æ—Ä—Ç–∫–∞—Ç—ã ==== */
const $ = (s, root=document) => root.querySelector(s);
const $$ = (s, root=document) => Array.from(root.querySelectorAll(s));

/* ==== –†–µ–Ω–¥–µ—Ä —Ç–∞–±–ª–∏—Ü—ã ==== */
function renderTable(){
  const tbody=$("#tbody"); let idx=0;
  CONFIG.forEach(section=>{
    const trHead=document.createElement('tr');
    trHead.innerHTML=`<td class="center">‚Äî</td><td colspan="6"><strong>${section.title}</strong></td>`;
    tbody.appendChild(trHead);
    section.items.forEach(item=>{
      idx++;
      const tr=document.createElement('tr');
      tr.dataset.id=item.id;
      tr.innerHTML=`
        <td class="center">${idx}</td>
        <td>${item.text}</td>
        <td>${item.link ? `<a href="${item.link}" target="_blank" rel="noopener">${new URL(item.link).host}</a>` : '<span class="muted">–ø–æ –∑–∞–ø—Ä–æ—Å—É</span>'}</td>
        <td>
          <div class="seg">
            <input id="ok_${item.id}" type="radio" name="g_${item.id}" value="ok"><label data-val="ok" for="ok_${item.id}">OK</label>
            <input id="risk_${item.id}" type="radio" name="g_${item.id}" value="risk"><label data-val="risk" for="risk_${item.id}">–†–∏—Å–∫</label>
            <input id="bad_${item.id}" type="radio" name="g_${item.id}" value="bad"><label data-val="bad" for="bad_${item.id}">–ü–ª–æ—Ö–æ</label>
            <input id="na_${item.id}" type="radio" name="g_${item.id}" value="na" checked><label for="na_${item.id}">–ù/–ü</label>
          </div>
        </td>
        <td class="center"><span class="pill">${item.weight}</span></td>
        <td class="center"><input class="chb" type="checkbox" /></td>
        <td><textarea rows="2" placeholder="–ö—Ä–∞—Ç–∫–∏–π —Å–≤–æ–¥/–æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ‚Ä¶"></textarea></td>
      `;
      tbody.appendChild(tr);
    });
  });
  $("#total").textContent = $$("#tbody tr").filter(tr=>tr.dataset.id).length;
}

/* ==== –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/–∑–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è ==== */
function saveState(){
  const rows=$$("#tbody tr");
  const data=rows.map(tr=>{
    const id=tr.dataset.id;
    const grade=tr.querySelector('input[name="g_'+id+'"]:checked')?.value || "na";
    const done=tr.querySelector('.chb')?.checked || false;
    const note=tr.querySelector('textarea')?.value || "";
    return {id,grade,done,note};
  });
  const head={
    name:$("#compName")?.value||"",
    inn:$("#compINN")?.value||"",
    ogrn:$("#compOGRN")?.value||""
  };
  const payload={model:model.name, head, data};
  try{ store.setItem(STATE_KEY, JSON.stringify(payload)); }catch(e){}
}
function loadState(){
  try{
    const raw=store.getItem(STATE_KEY); if(!raw) return;
    const payload=JSON.parse(raw);
    if(payload?.head){
      $("#compName").value=payload.head.name||"";
      $("#compINN").value=payload.head.inn||"";
      $("#compOGRN").value=payload.head.ogrn||"";
    }
    if(payload?.model==="conservative"){ setModelConservative(); }
    (payload?.data||[]).forEach(row=>{
      const tr=$(`tr[data-id="${row.id}"]`); if(!tr) return;
      const input=tr.querySelector(`input[name="g_${row.id}"][value="${row.grade}"]`);
      if(input) input.checked=true;
      const chb=tr.querySelector('.chb'); if(chb) chb.checked=!!row.done;
      const ta=tr.querySelector('textarea'); if(ta) ta.value=row.note||"";
    });
  }catch(e){}
}

/* ==== –†–∞—Å—á—ë—Ç ==== */
function coef(val){ if(val==="ok")return 1; if(val==="risk")return .5; if(val==="bad")return 0; return model.npFactor; }
function calc(){
  let score=0, done=0;
  CONFIG.forEach(section=>section.items.forEach(item=>{
    const v=document.querySelector(`input[name="g_${item.id}"]:checked`)?.value || "na";
    score+=item.weight*coef(v);
    if(document.querySelector(`tr[data-id="${item.id}"] .chb`)?.checked) done++;
  }));
  const totalRows=$$("#tbody tr").filter(tr=>tr.dataset.id).length;
  $("#done").textContent=done;
  $("#bar").style.width=(totalRows? Math.round(100*done/totalRows):0)+"%";
  $("#score").textContent=Math.round(score);
  const g=score>=85?"A":score>=70?"B":score>=50?"C":"D";
  $("#grade").textContent=g;
  $("#grade").className="grade "+g;
}

/* ==== –û–ø–∏—Å–∞–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–∞ ==== */
function describeGrade(g){
  return {A:"–ù–∏–∑–∫–∏–π —Ä–∏—Å–∫: —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —É—Å–ª–æ–≤–∏—è, –≤–æ–∑–º–æ–∂–Ω–∞ –æ—Ç—Å—Ä–æ—á–∫–∞.",
          B:"–£–º–µ—Ä–µ–Ω–Ω—ã–π —Ä–∏—Å–∫: —á–∞—Å—Ç—å —Å—É–º–º—ã —á–µ—Ä–µ–∑ –∞–∫–∫—Ä–µ–¥–∏—Ç–∏–≤/–≥–∞—Ä–∞–Ω—Ç–∏—é.",
          C:"–ü–æ–≤—ã—à–µ–Ω–Ω—ã–π —Ä–∏—Å–∫: –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞ ‚â§20% + –≥–∞—Ä–∞–Ω—Ç–∏—è; –º–∞–ª—ã–µ –ø–∞—Ä—Ç–∏–∏.",
          D:"–í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫: –æ—Ç–∫–∞–∑ –∏–ª–∏ –∂—ë—Å—Ç–∫–∏–µ —É—Å–ª–æ–≤–∏—è/—ç—Å–∫—Ä–æ—É."}[g]||"";
}

/* ==== –°–≤–æ–¥–∫–∞ ==== */
function buildSummary(){
  const now=new Date();
  const name=$("#compName").value||"‚Äî";
  const inn=$("#compINN").value||"‚Äî";
  const ogrn=$("#compOGRN").value||"‚Äî";
  const lines=[];
  lines.push(`–ò—Ç–æ–≥–æ–≤–∞—è –∑–∞–ø–∏—Å–∫–∞ –ø–æ –ø—Ä–æ–≤–µ—Ä–∫–µ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞ ‚Äî ${now.toLocaleDateString()} ${now.toLocaleTimeString()}`);
  lines.push(`–ö–æ–º–ø–∞–Ω–∏—è: ${name}`);
  lines.push(`–ò–ù–ù: ${inn}`);
  lines.push(`–û–ì–†–ù: ${ogrn}`);
  lines.push(`–ú–æ–¥–µ–ª—å: ${model.name==="neutral"?"–Ω–µ–π—Ç—Ä–∞–ª—å–Ω–∞—è":"–∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–∞—è"}; –ë–∞–ª–ª: ${$("#score").textContent}/100; –†–µ–π—Ç–∏–Ω–≥: ${$("#grade").textContent}`);
  lines.push(`–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: ${describeGrade($("#grade").textContent)}`);
  lines.push("");

  CONFIG.forEach(section=>{
    lines.push(section.title);
    section.items.forEach(item=>{
      const v=document.querySelector(`input[name="g_${item.id}"]:checked`)?.value || "na";
      const note=document.querySelector(`tr[data-id="${item.id}"] textarea`)?.value || "";
      const mark=({"ok":"OK","risk":"–†–∏—Å–∫","bad":"–ü–ª–æ—Ö–æ","na":"–ù/–ü"})[v];
      lines.push(`‚Äî ${item.id} ${item.text} ‚Äî [${mark}] (–≤–µ—Å ${item.weight})${note? " // "+note:""}`);
    });
    lines.push("");
  });

  $("#summary").value=lines.join("\n");
}

/* ==== –≠–∫—Å–ø–æ—Ä—Ç/–ò–º–ø–æ—Ä—Ç ==== */
function exportJSON(){
  const rows=$$("#tbody tr").filter(tr=>tr.dataset.id);
  const payload={
    version:"1.1",
    updated:new Date().toISOString(),
    model:model.name,
    head:{ name:$("#compName").value||"", inn:$("#compINN").value||"", ogrn:$("#compOGRN").value||"" },
    rows: rows.map(tr=>{
      const id=tr.dataset.id;
      const text=tr.cells[1].textContent.trim();
      const link=tr.cells[2].querySelector('a')?.href||"";
      const grade=tr.querySelector(`input[name="g_${id}"]:checked`)?.value||"na";
      const done=tr.querySelector('.chb')?.checked||false;
      const note=tr.querySelector('textarea')?.value||"";
      const weight=Number(tr.cells[4].innerText.trim());
      return {id,text,link,grade,done,note,weight};
    }),
    score: $("#score").textContent,
    rating: $("#grade").textContent
  };
  const blob=new Blob([JSON.stringify(payload,null,2)],{type:"application/json"});
  const a=document.createElement('a'); a.href=URL.createObjectURL(blob);
  a.download=`checklist_${new Date().toISOString().slice(0,10)}.json`; a.click();
  URL.revokeObjectURL(a.href);
}
function importJSON(file){
  const reader=new FileReader();
  reader.onload=e=>{
    try{
      const data=JSON.parse(e.target.result);
      if(data?.head){ $("#compName").value=data.head.name||""; $("#compINN").value=data.head.inn||""; $("#compOGRN").value=data.head.ogrn||""; }
      if(data?.model==="conservative") setModelConservative(); else setModelNeutral();
      (data?.rows||[]).forEach(r=>{
        const tr=$(`tr[data-id="${r.id}"]`); if(!tr) return;
        const inp=tr.querySelector(`input[name="g_${r.id}"][value="${r.grade||"na"}"]`); if(inp) inp.checked=true;
        const chb=tr.querySelector('.chb'); if(chb) chb.checked=!!r.done;
        const ta=tr.querySelector('textarea'); if(ta) ta.value=r.note||"";
      });
      calc(); buildSummary(); saveState();
    }catch(err){ alert("–ù–µ —É–¥–∞–ª–æ—Å—å –ø—Ä–æ—á–∏—Ç–∞—Ç—å —Ñ–∞–π–ª JSON"); }
  };
  reader.readAsText(file,"utf-8");
}

/* ==== –ü–µ—á–∞—Ç—å –∏ –º–æ–¥–µ–ª—å ==== */
function doPrint(){ window.print(); }
function setModelNeutral(){ model={name:"neutral",npFactor:0.0}; $("#modelTag").textContent="–ú–æ–¥–µ–ª—å: –Ω–µ–π—Ç—Ä–∞–ª—å–Ω–∞—è"; saveState(); calc(); buildSummary(); }
function setModelConservative(){ model={name:"conservative",npFactor:0.25}; $("#modelTag").textContent="–ú–æ–¥–µ–ª—å: –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–∞—è (–ù/–ü = 25%)"; saveState(); calc(); buildSummary(); }

/* ==== –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è ==== */
renderTable();
loadState();
calc();
buildSummary();

document.addEventListener('input', e=>{
  if(e.target.matches('input[type="radio"], textarea, #compName, #compINN, #compOGRN')){ calc(); buildSummary(); saveState(); }
});
document.addEventListener('change', e=>{
  if(e.target.matches('.chb')){ calc(); buildSummary(); saveState(); }
});

$("#buildSummary").addEventListener('click', ()=>buildSummary());
$("#print").addEventListener('click', doPrint);
$("#print2").addEventListener('click', doPrint);
$("#reset").addEventListener('click', ()=>{
  $$("#tbody tr").forEach(tr=>{
    const id=tr.dataset.id;
    if(id){
      tr.querySelector(`input[name="g_${id}"][value="na"]`).checked=true;
      tr.querySelector('.chb').checked=false;
      tr.querySelector('textarea').value="";
    }
  });
  $("#compName").value=""; $("#compINN").value=""; $("#compOGRN").value="";
  store.removeItem(STATE_KEY);
  calc(); buildSummary();
});
$("#export").addEventListener('click', exportJSON);
$("#importFile").addEventListener('change', e=>{ if(e.target.files?.[0]) importJSON(e.target.files[0]); });
$("#toggleModel").addEventListener('click', ()=>{ model.name==="neutral"?setModelConservative():setModelNeutral(); });

/* –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å –ø—Ä–µ–∂–Ω–∏–º–∏ –∫–Ω–æ–ø–∫–∞–º–∏ (–µ—Å–ª–∏ –≥–¥–µ-—Ç–æ –µ—Å—Ç—å <details>) */
$("#expand").addEventListener('click', ()=>document.querySelectorAll('details').forEach(d=>d.open=true));
$("#collapse").addEventListener('click', ()=>document.querySelectorAll('details').forEach(d=>d.open=false));
</script>
</body>
</html>
