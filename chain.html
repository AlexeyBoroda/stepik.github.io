<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Собери цепочку</title>
<style>
  body{margin:0;font-family:system-ui,Segoe UI,Arial,sans-serif;background:transparent;color:#0f172a}
  .wrap{max-width:900px;margin:28px auto;padding:16px}
  .zone{display:flex;gap:10px;flex-wrap:wrap;min-height:64px;padding:10px;border:2px dashed #cbd5e1;border-radius:10px;background:#f8fafc}
  .card{padding:8px 10px;background:#fff;border:1px solid #e2e8f0;border-radius:10px;cursor:grab;user-select:none}
  .card.correct{border-color:#10b981;background:#ecfdf5}
  .card.wrong{border-color:#ef4444;background:#fef2f2}
  .btn{margin-top:12px;padding:10px 14px;border:0;border-radius:10px;background:#111827;color:#fff;cursor:pointer}
  .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin-top:10px}
  .arrow{opacity:.6}
</style>
</head>
<body>
<div class="wrap">
  <p>Перетащите карточки так, чтобы получить правильный порядок звеньев.</p>
  <div class="zone" id="zone"></div>
  <button class="btn" id="check">Проверить</button>
  <div class="row" style="margin-top:18px;">
    <small class="arrow">Подсказка: Продукт → Клиенты → Выручка → Расходы → Прибыль → Денежный поток</small>
  </div>
</div>
<script>
const correct=["Продукт","Клиенты","Выручка","Расходы","Прибыль","Денежный поток"];
const zone=document.getElementById('zone');

function render(shuf){
  zone.innerHTML='';
  shuf.forEach(text=>{
    const el=document.createElement('div');
    el.className='card'; el.draggable=true; el.textContent=text;
    el.addEventListener('dragstart',e=>{e.dataTransfer.setData('text/plain', text); e.dataTransfer.effectAllowed='move'; el.classList.add('drag');});
    el.addEventListener('dragend',()=>el.classList.remove('drag'));
    zone.appendChild(el);
  });
}

zone.addEventListener('dragover',e=>{e.preventDefault(); const drag=document.querySelector('.drag'); const after=[...zone.querySelectorAll('.card')].find(c=>e.clientX<c.getBoundingClientRect().left+ c.offsetWidth/2); zone.insertBefore(drag, after||null);});
zone.addEventListener('drop',e=>e.preventDefault());

function shuffle(a){return a.map(v=>[Math.random(),v]).sort((x,y)=>x[0]-y[0]).map(x=>x[1]);}
render(shuffle(correct));

document.getElementById('check').onclick=()=>{
  const items=[...zone.querySelectorAll('.card')].map(c=>c.textContent.trim());
  [...zone.children].forEach((c,i)=>{c.classList.remove('correct','wrong'); c.classList.add(items[i]===correct[i]?'correct':'wrong');});
};
</script>
</body>
</html>
